<!DOCTYPE html>
<html lang="en">
    <%-include('layouts/header')-%>
    <style>
        /* Custom ordered list styling for post excerpts: 1.), 2.), ... and nested a.), b.), ... */
        .post-subtitle ol {
            list-style: none !important;
            counter-reset: outer-counter;
            padding-left: 0 !important;
            margin-bottom: 1rem;
        }
        .post-subtitle ol > li {
            counter-increment: outer-counter;
            position: relative;
            padding-left: 2.5em;
            margin-bottom: 0.5em;
            line-height: 1.6;
        }
        .post-subtitle ol > li::before {
            content: counter(outer-counter) ".) ";
            position: absolute;
            left: 0;
            font-weight: normal;
        }
        .post-subtitle ol ol {
            list-style: none !important;
            counter-reset: inner-counter;
            margin-top: 0.5em;
            padding-left: 1em !important;
        }
        .post-subtitle ol ol > li {
            counter-increment: inner-counter;
        }
        .post-subtitle ol ol > li::before {
            content: counter(inner-counter, lower-alpha) ".) ";
        }
    </style>
    <body>
        <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WPZ6BNP4"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
        <!-- Navigation-->
        <%-include('layouts/navbar')-%>
        <!-- Page Header-->
        <header class="masthead">
            <div class="container position-relative px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">
                        <div class="site-heading">
                            <h1>Mathematiques- Bac Marocain</h1>
                            <span class="subheading">Mathematics at High school</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- Main Content-->
        <div class="container px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-12 col-lg-10 col-xl-9">
                    <!-- Category Filter -->
                    <div class="mb-5 p-4 bg-light rounded-3 shadow-sm">
                        <h5 class="text-center mb-3 text-muted">Filtrer par catÃ©gorie</h5>
                        <div class="d-flex flex-wrap gap-2 justify-content-center align-items-center">
                            <a href="/" class="btn btn-sm <%=!category ? 'btn-primary' : 'btn-outline-primary'%> px-3 py-2">
                                ðŸ“š Toutes
                            </a>
                            <% if (categories && categories.length > 0) { %>
                                <% categories.forEach(cat => { %>
                                    <a href="/?category=<%= cat.name %>" 
                                       class="btn btn-sm <%=category === cat.name ? 'btn-primary' : 'btn-outline-primary'%> px-3 py-2">
                                        <%= cat.name %>
                                    </a>
                                <% }) %>
                            <% } %>
                        </div>
                    </div>
                    <%for (var i=0;i<posts.length;i++){%>
                    <!-- Post preview-->
                    <div class="post-preview">
                        <a href="/post/<%=posts[i]._id%>">
                            <h2 class="post-title"><%=posts[i].title%></h2>
                            <h3 class="post-subtitle"><%=posts[i].body.replace(/<[^>]*>/g, '').substring(0,200)%>...</h3>
                        </a>
                        <p class="post-meta">
                            <span class="badge bg-primary me-2"><%=posts[i].category || 'ArithmÃ©tique'%></span>
                            <% if (posts[i].solutionId) { %>
                                <span class="badge bg-success me-2">Solution</span>
                            <% } %>
                            Posted by admin on <%=new Date().toDateString()%>
                        </p>
                    </div>
                    <!-- Divider-->
                    <hr class="my-4" />
                    <%}%>
        </div>
    </div>
        <!-- Footer-->
       <%-include('layouts/footer')-%>
        <!-- Bootstrap core JS-->
        <%-include('layouts/script')-%>
    </body>
</html>
